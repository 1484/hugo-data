+++
date = "2016-04-17T15:14:23+09:00"
draft = false
title = "ConoHaにDevStack環境を構築"
categories = ["cloud"]
slug = "conoha-devstack"
tags = ["OpenStack", "DevStack", "ConoHa"]
+++

愛用のThinkPadならVMwareで動作するので問題ありませんが、こうがっつり検証環境を持ち歩いたりする必要に駆られる時以外はThinkPadは持ち歩きたくないのです、重いし。普段はそんなCPU必要無い事ばかりですし、そんな時はタブレットPCを持ち歩いています。

でもそんな時でも時折検証を取りたくなります。今後も検証用にずっしりとしたPCを持ち歩くのか？と言われるとそれもなーって感じで、自宅にデスクトップを置いてそこへリモート接続するなりしたら良いのでしょうけれど、電源入れっぱなしのサーバを自宅で運用するのも今時じゃないかもね？っていう事でVPSサービスを用いて環境を作っておく事にしました。そのためにはハイパーバイザがネスト可能となっている必要があり、これが可能なVPSはいくつかあるのですが安価で使いやすいのでGMOのConoHaが選ばれている様です。


24時間365日起動するのと違い、時間単位での課金が可能ですので検証の時だけ電源をONにする事で経費節減に繋がります。寝てるときとか電源ONにしておく必要無いですものね。そんな感じで検証するぞ、ってパソコンの前に居るときだけしか起動しないインスタンスなのでCPUやメモリはがっつりお大尽でもいいのですが、起動している間は課金されますので、なるべくその際の心理的負担を減らすためにも最低限にしておきます。なのでメモリ4GBの4コアを選択しました。これなら1時間起動しても4.8円、リーズナブルです。取り急ぎ今回はOpenStackのコンポーネントを1台にインストールするall in one環境としました。複数インスタンスにしようとするとそのイメージ保存には月額1500円かかってしまいますので保存しっぱなしにして使いたい時に立ち上げる、という技が使いづらいです。こちらもイメージ領域も時間単位で課金出来ますので、「必要なときにVM作成からDevStack環境を構築して使い終わったらVMごと削除」するScriptを用意する事で費用削減になると考えられます。これでやりたい事が一通り出来れば、もはや高性能なノートPCは要らなくなるかなぁと思いますので、今後の自己投資としてもちゃんと構築の検証を取っておきたい所ですね。

<hr />
2016年4月23日追記

ConoHaは以前はnested kvm環境だったらしいのですが最近は違うのですね。DevStack環境の構築自体は出来るのですがVM作ろうとしたら怒られました。しょんぼり。

<hr />
2016年6月29日追記

あれ？でも virt_type = qemu なら動いてもいい気がしますよね。もうちょっと勉強して再挑戦してみよう。

<hr />
2016年7月8日追記

<a href="/2016/07/08/2016-07-08-conoha-devstack-tips/">無事成功</a>したのです。
